<!DOCTYPE html>
<html>
  <head>
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
 <script>

  $(document).ready(function() {
    allelements = $("*");

if (!('webkitSpeechRecognition' in window)) {
  upgrade();
} else {
  var recognition = new webkitSpeechRecognition();
  recognition.continuous = false;

  recognition.onstart = function() {}
  recognition.onresult = function(event) {}
  recognition.onerror = function(event) {}
  recognition.onend = function() {}
  

    
$(".recordbutton").click(function() {
	startButton();
	var potentialcommand = $("#command").val();

	console.log(potentialcommand);

	var re = /^(click|scroll|enter)\s(.*)/i;
    var result = re.exec(potentialcommand);

 	if(result) {
	  var verb = result[1];
      var arg = result[2]

      console.log("verb: " + verb + ", args: " + arg)

      switch(verb) {
      	case "click":
      	  // what do we do if click?
      	  console.log("handling click")

      	  //console.log($("*:contains('" + arg + "')"));

      	  var stringpieces = arg.split(/\s/);

      	  $("a,input,button").each(function() {
      	    if($(this)[0].tagName == "INPUT") {
      	    	// look for the text in INPUT fields
      	    	
      	    } else if() { 

      	    }
      	  })

      	  break;
      	case "scroll":
      	  // what do we do on scroll?
      	  console.log("handling scroll`")
      	  break;
      	case "enter":
      	  // what do we do on enter?
      	  console.log("handling enter")
      	  break;
      	default:
      	  console.log("sorry, that is not a recognized command")
      }
  }
});


  function startButton(event) {

    final_transcript = '';
	recognition.lang = 'en-US';    
	recognition.start();
}



}
});
  </script>


</head>
<body>

<p>
<input id="thebutton" type="button" class ="recordbutton" value="Recording Start">
</p>

<p>
<a href="http://www.cmu.edu">Carnegie Mellon University</a>
</p>

<p>
  <input type="text" id="command" value="">
</p>

</body>

</html>